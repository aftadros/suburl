<!DOCTYPE html>
<html>
	<head>
		<title>suburl - Shorten URLs with Wildcards.</title>
		<link rel="stylesheet" href="/index.css">
		<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
		<meta charset="utf-8" />

		<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
	</head>

	<body>
		<div id="description">
			<h1>suburl</h1>

			<p id="exp">URL Shortening with Wildcard substitution.</p>

			<div id="howto">
				<p>
				<form id="URLForm">
					<fieldset>
						<input class="longURL" size="41" type="text" name="longURL" placeholder="URL with/without wildcards ([*]).   e.g., http://google.com/search?q=[*]" /><br /><br />
						http://u.onloop.net/<input class="shortURL" type="text" name="shortURL" placeholder="<= 10 chars (A-Z a-z 0-9 _)" /><br /><br />
						<input class="submitURL" type="submit" value="Shorten!" onclick="return global.formSubmit();" />
						<div id="status"></div>
					</fieldset>
				</form>

				<hr />

				<p>
				-- Enter an URL with/without wildcard characters ([*]):<br /> <i>http://www.amazon.com/s/ref=nb_sb_noss?url=search-alias=[*]&field-keywords=[*]</i><br />

				-- Enter desired short URL:<br /> <i>amzn</i><br />

				-- Access short URL with parameters to substitute wildcards, like so:<br /> <a href="/amzn/books,krautrocksampler">u.onloop.net/amzn/books,krautrocksampler</a> or <a href="/amzn/music,frank zappa">u.onloop.net/amzn/music,frank zappa</a><br />

				-- And yes, URLs can be shortened the normal way (without wildcards).<br />

				-- A couple more examples: <a href="/goog/recursion">u.onloop.net/goog/recursion</a> and <a href="/wiki/buffalo buffalo buffalo">u.onloop.net/wiki/buffalo buffalo buffalo</a>
			</div>

			<hr />

			<p id="footer">
			&copy; <a href="http://onloop.net/" target="_blank">Pranav Ravichandran</a>.
			</p>

		</div>

		<a href="https://github.com/pranavrc/suburl/"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_left_gray_6d6d6d.png" alt="Fork me on GitHub"></a>

		<script>
			window.onload = function() {
				document.getElementsByClassName('longURL')[0].focus();
			}

			var global = (function () {
				var requests;

				return {
					formSubmit: function formSubmit() {
						$('div#status').html('<img src="/loader.gif" alt="Fetching..." />');

						if (requests) requests.abort();

				    	requests = $.ajax({type:'POST', url: '', data:$('#URLForm').serialize(), success: function(response) {
								   		$('div#status').html(response);
								   }});

						return false;
					}
				};
			})();
		</script>
	</body>
</html>
