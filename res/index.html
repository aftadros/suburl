<!DOCTYPE html>
<html>
	<head>
		<title>suburl - Shorten URLs with wildcard characters.</title>
		<link rel="stylesheet" href="/index.css">
		<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
		<meta charset="utf-8" />

		<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
	</head>

	<body>
		<div id="description">
			<h1>suburl</h1>

			<p id="exp">URL Shortening with wildcard support.</p>

			<div id="howto">
				<p>
				<form id="URLForm">
					<fieldset>
						<input class="longURL" size="41" type="text" name="longURL" placeholder="Original URL with/without wildcards." /><br /><br />
						http://u.onloop.net/<input class="shortURL" type="text" name="shortURL" placeholder="Short URL." /><br /><br />
						<input class="submitURL" type="submit" value="Shorten!" onclick="return global.formSubmit();" />
						<div id="status"></div>
					</fieldset>
				</form>

				<p>
				Enter an URL with/without wildcard characters ([*]):<br /> <i>http://www.amazon.com/s/ref=nb_sb_noss?url=search-alias=[*]&field-keywords=[*]</i><br />

				Enter desired short URL:<br /> <i>amzn</i><br />

				Access short URL with parameters to substitute wildcards, like so:<br /> <a href="/amzn/books,krautrocksampler">u.onloop.net/amzn/books,krautrocksampler</a><br />

				And yes, URLs can be added the normal way.
			</div>

			<hr />

			<p id="footer">
			&copy; <a href="http://onloop.net/" target="_blank">Pranav Ravichandran</a>.
			</p>

		</div>

		<a href="https://github.com/pranavrc/suburl/"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_left_gray_6d6d6d.png" alt="Fork me on GitHub"></a>

		<script>
			window.onload = function() {
				document.getElementsByClassName('longURL')[0].focus();
			}

			var global = (function () {
				var requests;

				return {
					formSubmit: function formSubmit() {
						$('div#status').html('<img src="/loader.gif" alt="Fetching..." />');

						if (requests) requests.abort();

				    	requests = $.ajax({type:'POST', url: '', data:$('#URLForm').serialize(), success: function(response) {
								   		$('div#status').html(response);
								   }});

						return false;
					}
				};
			})();
		</script>
	</body>
</html>
